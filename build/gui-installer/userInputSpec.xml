<userInput>
	<!-- Install -->
	<panel order="0">
		<field type="title" txt="Install or Upgrade software" bold="true" size="1" />
		<field type="staticText" align="left" txt="Choose Install if you haven't installed UPT on this machine before. WARNING: When choosing Install, the installer will remove any previously installed application servers (using caBIG installers) or databases installed based on the information you provide, so be sure to backup your application server and database instance if they exist. For detailed descriptions on each of the properties in this installer, see https://wiki.nci.nih.gov/x/Baml"/>
		<field type="divider" align="top"/>
		<field type="radio" variable="setup.type">
			<description align="left" txt="Choose a new Install"
			id="installation.radio"/>
			<spec>
				<choice txt="Install" id="setup.type.install" value="install" set="true" />				
			</spec>
		</field>		
	</panel>

	<!-- Install -->
	<panel order="1">
		<field type="title" txt="Installation Type" bold="true" size="1" />
		<field type="staticText" align="left" txt="A Typical install requires you to enter an essential minimum number of values to successfully install the software. A Typical install configures ports and other required values. A Custom install allows you to modify all of the configurable values such as port numbers."/>
		<field type="divider" align="top"/>
		<field type="radio" variable="install.type">
			<description align="left" txt="Choose a Typical or Custom install"
			id="type.radio"/>
			<spec>
				<choice txt="Typical" id="install.type.typical" value="typical" set="true" />
				<choice txt="Custom" id="install.type.custom" value="custom" />
			</spec>
		</field>		
	</panel>
	
	
	<!-- Install -->
	<panel order="2">
		<field type="title" txt="Configure your JBoss application server" bold="true" size="1" />
		<field type="staticText" align="left" txt="As part of this installtion, JBoss will be installed in ${UserPathPanelVariable}.  It will be configured based on the values you enter below.  NOTE: The Hostname below (and on other panels of this installer) is the host name accesible from this machine and others on the local network. To access this JBoss application server from the Internet, you may need to provide the JBoss HTTP Port to your Network administrator to allow access through the firewall. For detailed descriptions on each of the properties below, see the Database Settings section at https://wiki.nci.nih.gov/x/Baml"/>
		<field type="divider" align="top"/>
		<field type="text" align="left" variable="jboss.server.hostname.value">
			<spec txt="Application Host Name" size="15" set="$HOST_NAME"/>			
			<validator
				class="com.izforge.izpack.util.HostNameValidator" txt="Unable to reach a host based on the name entered. Please reenter a valid hostname." id="hostname1.id">
			</validator>
		</field>	
	
		<field type="text" variable="jboss.server.port.value">			
			<spec txt="JBoss Application HTTP Port Number: " id="text.label" size="15" set="46210"/>			
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The http port number is already in use. Choose a different port number." id="error.label">
			</validator>
		</field>		
		<field type="text" variable="jboss.server.jndi.port.value">						
			<spec txt="JBoss Application JNDI Port Number: " id="text.label" size="15" set="46200"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The JNDI port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.server.name.value">						
			<spec txt="JBoss Application Server Name: " id="text.label" size="15" set="default"/>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt=" JBoss Application Server Name:  is a required field" />
		</field>
		<field type="password" align="left" variable="jboss.web.password.value">
			<spec>
				<pwd txt="JBoss Web Console Password: " size="15" set=""/>
				<pwd txt="Confirm JBoss Web Console Password: " size="15" set=""/>
			</spec>
	                <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="JBoss WebConsole Passwords are required fields" />
			<validator class="com.izforge.izpack.util.PasswordEqualityValidator" txt="Passwords do not match. Please re-enter your JBoss Web Console passwords."/>
		</field>
		<field type="text" variable="jboss.server.rmi.port.value">						
			<spec txt="JBoss Application RMI Port Number: " id="text.label" size="15" set="46230"/>			
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The jndi port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>	
		<field type="text" variable="jboss.server.bind.port.value">						
			<spec txt="JBoss Application Bind Port Number: " id="text.label" size="15" set="46190"/>			
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The bind port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.server.redirect.port.value">						
			<spec txt="Application Redirect Port Number " id="text.label" size="15" set="46220"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The redirect port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>		

		<field type="text" variable="jboss.server.ajp.port.value">
			<spec txt="Application AJP Port Number " id="text.label" size="15" set="46180"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The ajp port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>

		<field type="text" variable="jboss.web.service.port.value">						
			<spec txt="Application Web Service Port Number " id="text.label" size="15" set="46250"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The web service port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>		


		<variable name="exclude.tomcat.value" value="true"/>
	</panel>

	<panel order="3">	
		<field type="title" txt="Create a JBoss Web Console Password" bold="true" size="1" />
		<field type="staticText" align="left" txt="The password you enter below is the password used to access the JBoss web console. This is a password you are creating, so you must keep track of this password for future use."/>
		<field type="divider" align="top"/>
	
		<field type="password" align="left" variable="jboss.web.password.value">
			<spec>
				<pwd txt="JBoss Web Console Password: " size="15" set=""/>
				<pwd txt="Confirm JBoss Web Console Password: " size="15" set=""/>
			</spec>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt="JBoss Web Console Passwords are required fields" />
			<validator class="com.izforge.izpack.util.PasswordEqualityValidator" txt="Passwords do not match. Please re-enter your JBoss Web Console passwords."/>
		</field>
		
		<variable name="jboss.server.hostname.value" value="$HOST_NAME"/>
		<variable name="jboss.server.port.value" value="46210"/>
		<variable name="jboss.server.jndi.port.value" value="46200"/>
		<variable name="jboss.server.name.value" value="default"/>
		<variable name="jboss.server.rmi.port.value" value="46230"/>		
		<variable name="jboss.ejbinvoker.port.value" value="46150"/>
		<variable name="jboss.cobraorb.port.value" value="46280"/>
		<variable name="jboss.hajndi.port.value" value="46160"/>
		<variable name="jboss.hajrmi.port.value" value="46260"/>
		<variable name="jboss.jms.port.value" value="46170"/>
		<variable name="jboss.jmx-rmi.port.value" value="46290"/>
		<variable name="jboss.messaging.port.value" value="46330"/>
		<variable name="jboss.pooledha.port.value" value="46270"/>
		<variable name="jboss.remoting.port.value" value="46320"/>		
		<variable name="jboss.server.bind.port.value" value="46190"/>
		<variable name="jboss.server.redirect.port.value" value="46220"/>
		<variable name="jboss.service.rmiobject.port.value" value="46240"/>
		<variable name="jboss.snmp-trapd.port.value" value="46300"/>
		<variable name="jboss.snmp.port.value" value="46310"/>
		<variable name="jboss.web.service.port.value" value="46250"/>	
		<variable name="jboss.server.ajp.port.value" value="46180"/>	
		<variable name="jboss.cluster.rmi.port.value" value="46140"/>
		<variable name="jboss.cluster.port.value" value="46130"/>
		<variable name="exclude.tomcat.value" value="true"/>
		
		<variable name="authentication.type" value="db"/>
	
	</panel>

	<panel order="4">	
		<field type="title" txt="Additional JBoss installation options" bold="true" size="1" />
		<field type="staticText" align="left" txt="For detailed descriptions on each of the properties below, see the Application Settings section at https://wiki.nci.nih.gov/x/Baml"/>
		<field type="divider" align="top"/>
		<field type="text" variable="jboss.service.rmiobject.port.value">						
			<spec txt="Application RMIObject Port Number " id="text.label" size="15" set="46240"/>			
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The rmiobject port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		
		<field type="text" variable="jboss.hajndi.port.value">						
			<spec txt="Application hajndi Port Number " id="text.label" size="15" set="46160"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The hajndi port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>		

		<field type="text" variable="jboss.cluster.rmi.port.value">						
			<spec txt="JBoss Application Cluster RMI Port Number: " id="text.label" size="15" set="46140"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The cluster rmi port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>		

		<field type="text" variable="jboss.jms.port.value">						
			<spec txt="JBoss Application JMS Port Number: " id="text.label" size="15" set="46170"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The jms port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		

		<field type="text" variable="jboss.ejbinvoker.port.value">						
			<spec txt="JBoss Application ejbinvoker Port Number: " id="text.label" size="15" set="46150"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The ejbinvoker port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>

		<field type="text" variable="jboss.hajrmi.port.value">						
			<spec txt="Application hajrmi Port Number " id="text.label" size="15" set="46260"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The hajrmi port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>

		<field type="text" variable="jboss.pooledha.port.value">						
			<spec txt="Enter the pooledha port number for the installation:" id="text.label" size="15" set="46270"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The pooledha port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.cobraorb.port.value">						
			<spec txt="Enter the cobraorb port number for the installation:" id="text.label" size="15" set="46280"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The cobraorb port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.jmx-rmi.port.value">						
			<spec txt="Enter the jmx-rmi port number for the installation:" id="text.label" size="15" set="46290"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The jmx-rmi port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.snmp-trapd.port.value">						
			<spec txt="Enter the snmp-trapd port number for the installation:" id="text.label" size="15" set="46300"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The snmp-trapd port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.snmp.port.value">						
			<spec txt="Enter the snmp port number for the installation:" id="text.label" size="15" set="46310"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The snmp port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>		
		<field type="text" variable="jboss.remoting.port.value">						
			<spec txt="Enter the remoting port number for the installation:" id="text.label" size="15" set="46320"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The remoting port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.messaging.port.value">						
			<spec txt="Enter the messaging port number for the installation:" id="text.label" size="15" set="46330"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The messaging port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" variable="jboss.cluster.port.value">						
			<spec txt="Application Server Cluster Port " id="text.label" size="15" set="46130"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The Application Server Cluster Port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>				
	</panel>

			
	<!-- upgrade -->
	<panel order="5">
		<field type="title" txt="Configure your existing JBoss application" bold="true" size="1" />
		<field type="staticText" align="left" txt="For detailed descriptions on each of the properties below, see the Application Settings section at https://wiki.nci.nih.gov/x/Baml"/>
		<field type="divider" align="top"/>
		
		<field type="dir" align="left" variable="existing.installation.home">
			<spec txt="Select the previous location of UPT Application: " size="15" set="$SYSTEM_user_home/apps/upt-app"/>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt=" Select the previous location of UPT Application:  is a required field" />
		</field>
		<field type="text" align="left" variable="jboss.server.hostname.value">
			<spec txt="JBoss Application Hostname: " size="15" set="$HOST_NAME"/>
			<validator
				class="com.izforge.izpack.util.HostNameValidator" txt="Unable to reach a host based on the name entered. Please reenter a valid hostname." id="jbosshostname.label">
			</validator>
		</field>		
		<field type="text" variable="jboss.server.port.value">			
			<spec txt="JBoss Application HTTP Port Number: " id="text.label" size="15" set="46210"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The HTTP port number is already in use. Choose a different port number." id="error.label">
			</validator>
		</field>		
		<field type="text" variable="jboss.server.jndi.port.value">						
			<spec txt="JBoss Application JNDI Port Number: " id="text.label" size="15" set="46200"/>
			<validator
				class="com.izforge.izpack.util.PortValidator" txt="The JNDI port number is already in use. Choose a different port number." id="error.label">
			</validator>			
		</field>
		<field type="text" align="left" variable="jboss.server.name.value">
			<spec txt="JBoss Application Server Name: " size="15" set="default"/>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt="JBoss Application Server Name is a required field." />
		</field>
		
	</panel>

	
	<!-- Install -->

	<panel order="6">
		<field type="title" txt="Authentication Type" bold="true" size="1" />
		<field type="staticText" align="left" txt="There are two types of ways to authenticate users: against database or using an LDAP server. To connect to LDAP, you must have an LDAP server available in your network."/>
		<field type="divider" align="top"/>
		<field type="radio" variable="authentication.type">
			<description align="left" txt="Which kind of authentication do you want to use?" id="ldap.radio"/>
			<spec>
			    <choice txt="Database" id="ldap.install.false" value="db" set="true"/>
			    <choice txt="LDAP" id="ldap.install" value="ldap" />			
			</spec>
		</field>		
	</panel>	

	<panel order="7">
		<field type="title" txt="LDAP Configuration" bold="true" size="1" />
	        <field type="staticText" align="left" txt="Choose the URL for the LDAP server and the Base DN for authenticating users. For detailed descriptions on each of the properties below, see the LDAP Settings section at https://wiki.nci.nih.gov/x/Baml"/>
		<field type="divider" align="top"/>
		<field type="text" variable="ldap.url.value">						
			<spec txt="LDAP URL: " id="text.label" size="25" set="ldaps://$HOST_NAME:636"/>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt="LDAP URL is a required field." />
		</field>
		<field type="text" variable="ldap.basedn.value">						
			<spec txt="LDAP Search Base DN: " id="text.label" size="25" set=""/>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt="LDAP Search Base DN is a required field." />
		</field>						
	</panel>

	<panel order="8">
	
		<field type="title" txt="Configuring your MySQL database connection " bold="true" size="1" />
		<field type="staticText" align="left" txt="The information you enter below will connect you to an existing MySQL database. It's highly recommended that 'Database Host Name' NOT be the machine from which you are currently installing. The 'Database User' must have full access to 'Database Name'. It's highly recommended you contact your database administrator to obtain this information. NOTE: All database objects for 'Database Name' will be dropped and recreated during the installation process. For detailed descriptions on each of the properties below, see the Database Settings section at https://wiki.nci.nih.gov/x/Baml"/>
		<field type="divider" align="top"/>
	
		<variable name="install.path" value="$INSTALL_PATH"/>
		<variable name="baseDir" value="$INSTALL_PATH"/>
	
		<field type="text" variable="database.server">
			<spec txt="Database Server Hostname: " id="dbhostname.label" size="25" set=""/>
			<validator
				class="com.izforge.izpack.util.HostNameValidator" txt="Unable to reach a host based on the name entered. Please reenter a valid hostname." id="dbhostname.label">
			</validator>			
		</field>
		<field type="text" variable="database.port">
			<spec txt="Database Port Number: " id="dbport.label" size="25" set="3306"/>
            		<validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database Port Number is a required field." />
		</field>		
		<field type="text" variable="database.name">
			<spec txt="Database Name: " id="text.label" size="25" set="csmupt"/>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database Name is a required field." />
		</field>		
		<field type="text" variable="database.user">
			<spec txt="Database username for UPT Application: " id="text.label" size="25" set="csmuser"/>
			<validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database User Name is a required field." />
		</field>		
		<field type="password" allign="left" variable="database.password">
			<spec>
				 <pwd txt="Password for Database User Name:" id="pwd.label" size="25" set=""/>				 
			</spec>
			<validator
				class="com.izforge.izpack.util.DBConnectionValidator" txt="Unable to connect to this database with the Database Application User and Password you have entered." id="error.label">
			</validator>
		</field>		
	</panel>
	<panel order="9">
		<field type="title" txt="Installation Summary" bold="true" size="1" />
		<field type="staticText" align="left" txt="Below are "/>
		<field type="divider" align="top"/>

		<field type="staticText" align="left" txt="JBoss Home [${UserPathPanelVariable}/${jboss.binaries.relative.dir}] - This is where JBoss is installed."/>
		<field type="space"/>
		<field type="staticText" align="left" txt="JBoss Server Name [${jboss.server.hostname.value}] - This is the hostname where jboss is running.  If you want to make this Application avaliable from the internet you may need to provide this to your network administrator."/>
		<field type="space"/>
		<field type="staticText" align="left" txt="JBoss Server Port [${jboss.server.port.value}] - This is the HTTP port for JBoss.  If you want to make this Application avaliable from the internet you may need to provide this to your network administrator."/>
		<field type="space"/>
		<field type="staticText" align="left" txt="JBoss URL [http://${jboss.server.hostname.value}:${jboss.server.port.value}/upt] - This will be the url to reach your application when the install is finished."/>
		<field type="space"/>
		<field type="staticText" align="left" txt="JBoss Log Dir [${UserPathPanelVariable}/${jboss.binaries.relative.dir}/server/${jboss.server.name.value}] - This is where the logs can be found."/>

		<field type="space"/>
		<field type="staticText" align="left" txt="Database URL [jdbc:mysql://${database.server}:${database.port}/${database.name}] "/>
		<field type="space"/>
		<field type="staticText" align="left" txt="Database User [${database.user}] "/>
	</panel>
</userInput>
